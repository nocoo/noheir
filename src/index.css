@import url("https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap");
@import url("https://fonts.googleapis.com/css2?family=Libre+Caslon+Text:wght@400;700&display=swap");
@import url("https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&display=swap");
@tailwind base;
@tailwind components;
@tailwind utilities;

/* Definition of the design system. All colors, gradients, fonts, etc should be defined here.
All colors MUST be HSL.

Financial Color System:
- Primary: Blue/Indigo (信任、专业)
- Income: Emerald (收入 - 稳重绿色)
- Expense: Rose (支出 - 现代红色)
- Neutral: Slate (文字、边框、背景)
*/

@layer base {
  :root {
    /* ========== Base Colors (Slate-based) ========== */
    --background: 210 40% 98%;       /* Slate-50 */
    --foreground: 222 47% 11%;       /* Slate-900 */

    --card: 0 0% 100%;               /* White */
    --card-foreground: 222 47% 11%;  /* Slate-900 */

    --popover: 210 40% 96%;          /* Slate-100 */
    --popover-foreground: 222 47% 11%; /* Slate-900 */

    /* ========== Primary: Logo Blue (专业、信任) ========== */
    --primary: 219 43% 41%;          /* Logo Blue #3b5a95 */
    --primary-foreground: 210 40% 98%; /* Slate-50 */
    --primary-hover: 219 43% 36%;    /* Darker logo blue */
    --primary-light: 219 28% 95%;    /* Very light blue */
    --primary-dark: 219 51% 45%;     /* Medium dark */

    /* ========== Secondary ========== */
    --secondary: 210 40% 96%;        /* Slate-100 */
    --secondary-foreground: 222 47% 11%; /* Slate-900 */

    /* ========== Muted ========== */
    --muted: 210 40% 96%;            /* Slate-100 */
    --muted-foreground: 215 16% 47%; /* Slate-500 */

    /* ========== Accent ========== */
    --accent: 210 40% 96%;           /* Slate-100 */
    --accent-foreground: 222 47% 11%; /* Slate-900 */

    /* ========== Destructive ========== */
    --destructive: 0 84% 60%;        /* Red-500 */
    --destructive-foreground: 210 40% 98%; /* Slate-50 */

    /* ========== Border & Input ========== */
    --border: 214 32% 91%;           /* Slate-200 */
    --input: 214 32% 91%;            /* Slate-200 */
    --ring: 219 43% 41%;             /* Logo Blue */

    /* ========== NEW: Financial Colors ========== */

    /* Income: Emerald (稳重绿色) */
    --income: 160 84% 39%;            /* Emerald-600 */
    --income-foreground: 210 40% 98%; /* Slate-50 */
    --income-bg: 160 84% 97%;        /* Emerald-50 */
    --income-dark: 160 84% 45%;      /* Emerald-500 */
    --income-light: 160 84% 95%;     /* Emerald-100 */

    /* Expense: Rose (现代红色) */
    --expense: 350 89% 60%;          /* Rose-600 */
    --expense-foreground: 210 40% 98%; /* Slate-50 */
    --expense-bg: 350 89% 97%;       /* Rose-50 */
    --expense-dark: 350 89% 65%;     /* Rose-500 */
    --expense-light: 350 89% 95%;    /* Rose-100 */

    /* Semantic Text Colors */
    --text-main: 222 47% 11%;        /* Slate-900 */
    --text-secondary: 215 16% 47%;   /* Slate-500 */
    --text-muted: 215 20% 65%;       /* Slate-400 */
    --text-income: 160 84% 39%;      /* Emerald-600 */
    --text-expense: 350 89% 60%;     /* Rose-600 */

    /* Semantic Backgrounds */
    --bg-main: 210 40% 98%;          /* Slate-50 */
    --bg-surface: 0 0% 100%;         /* White */
    --bg-alt: 210 40% 96%;           /* Slate-100 */

    /* ========== Chart Colors (金融色系) ========== */
    --chart-1: 160 84% 39%;           /* Emerald (income) */
    --chart-2: 350 89% 60%;           /* Rose (expense) */
    --chart-3: 221 83% 53%;           /* Blue (primary) */
    --chart-4: 45 93% 47%;            /* Yellow/Amber */
    --chart-5: 262 83% 58%;           /* Purple */

    /* ========== Sidebar ========== */
    --sidebar-background: 0 0% 100%;  /* White */
    --sidebar-foreground: 222 47% 11%; /* Slate-900 */
    --sidebar-primary: 219 43% 41%;   /* Logo Blue */
    --sidebar-primary-foreground: 210 40% 98%; /* Slate-50 */
    --sidebar-accent: 210 40% 96%;    /* Slate-100 */
    --sidebar-accent-foreground: 222 47% 11%; /* Slate-900 */
    --sidebar-border: 214 32% 91%;   /* Slate-200 */
    --sidebar-ring: 219 43% 41%;      /* Logo Blue */

    /* ========== Legacy Sidebar ========== */
    --sidebar: 0 0% 100%;

    /* ========== Heatmap Colors (保留原GitHub风格) ========== */
    --heatmap-0: #ebedf0;
    --heatmap-1: #c6e48b;
    --heatmap-2: #7bc96f;
    --heatmap-3: #239a3b;
    --heatmap-4: #196127;

    /* ========== Other ========== */
    --radius: 0.75rem;

    --font-sans: 'Roboto', ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', Arial, 'Noto Sans', sans-serif;
    --font-serif: 'Libre Caslon Text', ui-serif, Georgia, Cambria, 'Times New Roman', Times, serif;
    --font-mono: 'Roboto Mono', ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace;

    --shadow-2xs: 0 1px 3px 0px hsl(0 0% 0% / 0.05);
    --shadow-xs: 0 1px 3px 0px hsl(0 0% 0% / 0.05);
    --shadow-sm: 0 1px 3px 0px hsl(0 0% 0% / 0.1), 0 1px 2px -1px hsl(0 0% 0% / 0.1);
    --shadow: 0 1px 3px 0px hsl(0 0% 0% / 0.1), 0 1px 2px -1px hsl(0 0% 0% / 0.1);
    --shadow-md: 0 1px 3px 0px hsl(0 0% 0% / 0.1), 0 2px 4px -1px hsl(0 0% 0% / 0.1);
    --shadow-lg: 0 1px 3px 0px hsl(0 0% 0% / 0.1), 0 4px 6px -1px hsl(0 0% 0% / 0.1);
    --shadow-xl: 0 1px 3px 0px hsl(0 0% 0% / 0.1), 0 8px 10px -1px hsl(0 0% 0% / 0.1);
    --shadow-2xl: 0 1px 3px 0px hsl(0 0% 0% / 0.25);

    --tracking-normal: 0em;
    --spacing: 0.25rem;
  }

  .dark {
    /* ========== Base Colors (Dark Mode) ========== */
    --background: 222 47% 11%;       /* Slate-900 */
    --foreground: 210 40% 98%;       /* Slate-50 */

    --card: 224 71% 4%;              /* Slate-950 / Slate-800 */
    --card-foreground: 210 40% 98%;  /* Slate-50 */

    --popover: 224 71% 4%;           /* Slate-950 */
    --popover-foreground: 210 40% 98%; /* Slate-50 */

    /* ========== Primary: Logo Blue (Dark Mode) ========== */
    --primary: 219 53% 55%;          /* Lighter logo blue for dark mode */
    --primary-foreground: 0 0% 100%;  /* White */
    --primary-hover: 219 53% 60%;    /* Even lighter */
    --primary-light: 219 43% 20%;    /* Very dark logo blue */
    --primary-dark: 219 53% 50%;     /* Medium */

    /* ========== Secondary (Dark Mode) ========== */
    --secondary: 215 20% 30%;        /* Slate-700 */
    --secondary-foreground: 210 40% 98%; /* Slate-50 */

    /* ========== Muted (Dark Mode) ========== */
    --muted: 215 20% 30%;            /* Slate-700 */
    --muted-foreground: 215 20% 65%; /* Slate-400 */

    /* ========== Accent (Dark Mode) ========== */
    --accent: 215 20% 30%;           /* Slate-700 */
    --accent-foreground: 210 40% 98%; /* Slate-50 */

    /* ========== Destructive (Dark Mode) ========== */
    --destructive: 0 72% 50%;        /* Red-600 */
    --destructive-foreground: 210 40% 98%; /* Slate-50 */

    /* ========== Border & Input (Dark Mode) ========== */
    --border: 215 20% 30%;           /* Slate-700 */
    --input: 215 20% 30%;            /* Slate-700 */
    --ring: 219 53% 55%;             /* Logo Blue (lighter for dark mode) */

    /* ========== NEW: Financial Colors (Dark Mode) ========== */

    /* Income: Emerald (Dark Mode) - 更亮以提升可读性 */
    --income: 160 100% 50%;          /* Emerald-400 (最亮易读) */
    --income-foreground: 160 100% 10%; /* Emerald-950 */
    --income-bg: 160 84% 15%;        /* Emerald-950 + 更亮背景 */
    --income-dark: 160 100% 45%;     /* Emerald-500 */
    --income-light: 160 84% 25%;     /* Emerald-800 */

    /* Expense: Rose (Dark Mode) - 更亮以提升可读性 */
    --expense: 350 100% 65%;         /* Rose-400 (最亮易读) */
    --expense-foreground: 350 100% 15%; /* Rose-950 */
    --expense-bg: 350 89% 15%;       /* Rose-950 + 更亮背景 */
    --expense-dark: 350 100% 60%;    /* Rose-500 */
    --expense-light: 350 89% 25%;    /* Rose-800 */

    /* Semantic Text Colors (Dark Mode) */
    --text-main: 210 40% 98%;        /* Slate-50 */
    --text-secondary: 215 20% 65%;   /* Slate-400 */
    --text-muted: 215 20% 50%;       /* Slate-500 */
    --text-income: 160 100% 55%;     /* Emerald-350 (更亮) */
    --text-expense: 350 100% 70%;    /* Rose-350 (更亮) */

    /* Semantic Backgrounds (Dark Mode) */
    --bg-main: 222 47% 11%;          /* Slate-900 */
    --bg-surface: 224 71% 4%;        /* Slate-950 */
    --bg-alt: 215 20% 20%;           /* Slate-800 */

    /* ========== Chart Colors (Dark Mode) ========== */
    --chart-1: 160 84% 50%;           /* Emerald (brighter) */
    --chart-2: 350 89% 70%;           /* Rose (brighter) */
    --chart-3: 217 91% 65%;           /* Blue (brighter) */
    --chart-4: 45 93% 57%;            /* Yellow (brighter) */
    --chart-5: 262 83% 68%;           /* Purple (brighter) */

    /* ========== Heatmap Colors (Dark Mode - GitHub style) ========== */
    --heatmap-0: #161b22;
    --heatmap-1: #0e4429;
    --heatmap-2: #006d32;
    --heatmap-3: #26a641;
    --heatmap-4: #39d353;

    /* ========== Sidebar (Dark Mode) ========== */
    --sidebar-background: 224 71% 4%; /* Slate-950 */
    --sidebar-foreground: 210 40% 98%; /* Slate-50 */
    --sidebar-primary: 219 53% 55%;  /* Logo Blue (lighter for dark mode) */
    --sidebar-primary-foreground: 0 0% 100%; /* White */
    --sidebar-accent: 215 20% 30%;   /* Slate-700 */
    --sidebar-accent-foreground: 210 40% 98%; /* Slate-50 */
    --sidebar-border: 215 20% 30%;   /* Slate-700 */
    --sidebar-ring: 219 53% 55%;     /* Logo Blue (lighter for dark mode) */

    --sidebar: 224 71% 4%;

    /* ========== Shadows (Dark Mode) ========== */
    --shadow-2xs: 0 1px 3px 0px hsl(0 0% 0% / 0.3);
    --shadow-xs: 0 1px 3px 0px hsl(0 0% 0% / 0.3);
    --shadow-sm: 0 1px 3px 0px hsl(0 0% 0% / 0.4), 0 1px 2px -1px hsl(0 0% 0% / 0.4);
    --shadow: 0 1px 3px 0px hsl(0 0% 0% / 0.4), 0 1px 2px -1px hsl(0 0% 0% / 0.4);
    --shadow-md: 0 1px 3px 0px hsl(0 0% 0% / 0.4), 0 2px 4px -1px hsl(0 0% 0% / 0.4);
    --shadow-lg: 0 1px 3px 0px hsl(0 0% 0% / 0.4), 0 4px 6px -1px hsl(0 0% 0% / 0.4);
    --shadow-xl: 0 1px 3px 0px hsl(0 0% 0% / 0.4), 0 8px 10px -1px hsl(0 0% 0% / 0.4);
    --shadow-2xl: 0 1px 3px 0px hsl(0 0% 0% / 0.6);
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground;
  }

  /* Prevent flash during auth state transitions */
  #root {
    min-height: 100vh;
  }
}

/* Loading Animation */
@keyframes loading {
  0% {
    transform: translateX(-100%);
  }
  50% {
    transform: translateX(100%);
  }
  100% {
    transform: translateX(-100%);
  }
}

/* Date Input Styling for Dark Mode Support */
input[type="date"] {
  position: relative;
  color-scheme: light;
}

.dark input[type="date"] {
  color-scheme: dark;
}

/* Date input calendar icon color */
input[type="date"]::-webkit-calendar-picker-indicator {
  cursor: pointer;
  opacity: 0.6;
  transition: opacity 0.2s;
}

input[type="date"]::-webkit-calendar-picker-indicator:hover {
  opacity: 1;
}

/* Dark mode calendar icon - use lighter color for visibility */
.dark input[type="date"]::-webkit-calendar-picker-indicator {
  filter: invert(1);
  opacity: 0.7;
}

.dark input[type="date"]::-webkit-calendar-picker-indicator:hover {
  opacity: 1;
}

/* Firefox date picker icon */
input[type="date"]::-moz-calendar-picker-indicator {
  cursor: pointer;
  opacity: 0.6;
}

input[type="date"]::-moz-calendar-picker-indicator:hover {
  opacity: 1;
}
